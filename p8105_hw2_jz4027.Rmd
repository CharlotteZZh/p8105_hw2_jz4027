---
title: "p8105_hw2_jz4027"
author: "Charlotte Zhang"
date: "2025-09-26"
output: github_document
---
```{r}
# Load needed library
library(tidyverse)
library(readxl)
```

# Problem 1
### Clean the pols_month data set 
```{r}
pols_month_df = 
  # import and clean pols-month data
  read_csv("./fivethirtyeight_datasets/pols-month.csv", na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  # split mon into year, month, day
  separate(mon, into = c("year", "month", "day"), sep = "-") |>
  mutate(
    # convert to integers
    year = as.integer(year),
    month = as.integer(month),
    day = as.integer(day),
    # replace month number with month name
    month = month.name[month],
    # create a president variable taking values gop and dem
    president = if_else(prez_gop == 1, "gop", "dem")
  ) |>
  # remove three variables
  select(-day, -prez_gop, -prez_dem)

pols_month_df
```

### Clean the snp data set
```{r}
snp_df = 
  # import and clean snp data
  read_csv("./fivethirtyeight_datasets/snp.csv", na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  # split date into month, day, year
  separate(date, into = c("month", "day", "year"), sep = "/") |>
  mutate(
    # convert to integers
    year = as.integer(year),
    # Change from 2-integer years to 4-integer
    year = if_else(year > 25, 1900 + year, 2000 + year),
    month = as.integer(month),
    day = as.integer(day),
    # replace month number with month name
    month = month.name[month]) |>
  select (year, month, close) |>
  # arrange according to year and month
  arrange(year, month)

snp_df
```

### Clean the unemployment data set
```{r}
unemployment_df = 
  # import and clean unemployment data
  read_csv("./fivethirtyeight_datasets/unemployment.csv", na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = 'month',
    values_to = 'unemployment',
  ) |>
  mutate(
    month = str_to_title(month),            # the first letter of each month is capitalized
    month = match(month, month.abb),        # convert abbreviation â†’ month number
    month = month.name[month]               # convert month number to full month name for format consistency 
  )

unemployment_df
```

### Merge
```{r}
snp_pols_merged_df = 
  left_join(pols_month_df, snp_df, by = c("year", "month"))

unemployment_merged_df =
  left_join(snp_pols_merged_df, unemployment_df, by = c("year", "month"))
unemployment_merged_df
```

### Explain and describe
pols_month csv file contains the number of politicians (sen, rep, gov, prez) affiliated with the GOP and the democratic party each month, throughout many years. It also shows which party hold the presidency by using 0 and 1. Then, the snp data set contains different dates and their corresponding SP closing value. The date column of the snp data set was also reformatted/cleaned for consistency across data sets. The unemployment data set includes monthly unemployment rate from 1948 to 2015, switched from the original wide format (month as column names) to long format for better format consistency. The resulting combined data set has a dimension of `r dim(unemployment_merged_df)` (rows and columns, respectively). It has a year range between `r range(unemployment_merged_df$year)`. Key variables include: `r colnames(unemployment_merged_df)`.

# Problem 2
```{r}
# Clean and organize data for Mr. Trash Wheel
Mr_df = read_excel("202409 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N653" ) |>
  janitor::clean_names() |>
  filter(!is.na(dumpster)) |>
  mutate(sports_balls = as.integer(round(sports_balls)))
```

```{r}
# Clean and organize data for Professor Trash Wheel
Professor_df = read_excel("202409 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel") |>
  janitor::clean_names() |>
  filter(!is.na(dumpster))
```

```{r}
# Clean and organize data for Gwynnda
Gwynnda_df = read_excel("202409 Trash Wheel Collection Data.xlsx", sheet = "Gwynnda Trash Wheel") |>
  janitor::clean_names() |>
  filter(!is.na(dumpster))
```








